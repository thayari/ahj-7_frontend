!function(e){var t={};function n(r){if(t[r])return t[r].exports;var c=t[r]={i:r,l:!1,exports:{}};return e[r].call(c.exports,c,c.exports,n),c.l=!0,c.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)n.d(r,c,function(t){return e[t]}.bind(null,c));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);n(1),n(2)},function(e,t,n){},function(e,t){function n(e,t,n,r,c,o,a){try{var i=e[o](a),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,c)}function r(e){return function(){var t=this,r=arguments;return new Promise((function(c,o){var a=e.apply(t,r);function i(e){n(a,c,o,i,s,"next",e)}function s(e){n(a,c,o,i,s,"throw",e)}i(void 0)}))}}var c,o=document.querySelector(".form-create-ticket"),a=document.querySelector(".form-edit-ticket"),i=document.querySelector(".tickets"),s=document.getElementById("add-button"),u=document.getElementById("modal-edit"),d=document.getElementById("modal-add"),l=document.getElementById("modal-delete"),f=document.querySelectorAll(".cancel"),m="http://localhost:7070/tickets";function p(){return v.apply(this,arguments)}function v(){return(v=r(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(m);case 2:if(!(t=e.sent).ok){e.next=10;break}return e.next=6,t.json();case 6:k(e.sent),e.next=11;break;case 10:console.error("Ошибка "+t.status);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){i.innerHTML="",e.map((function(e){return n=(t=e).status?"checked":"unchecked",'<li class="ticket-item" data-id="'.concat(t.id,'">\n  <div class="ticket-item-wrapper">\n    <div class="information">\n      <button class="check ').concat(n,'"></button>\n      <div class="name">').concat(t.name,'</div>\n      <div class="date">').concat(t.created,'</div>\n    </div>\n    <div class="buttons">\n      <button class="edit">✎</button>\n      <button class="delete">×</button>\n    </div>\n  </div>\n</li>');var t,n})).forEach((function(e){i.insertAdjacentHTML("beforeend",e)}))}function b(e){document.querySelector(".bg").classList.remove("hidden"),e.classList.remove("hidden")}function h(e){document.querySelector(".bg").classList.add("hidden"),e.classList.add("hidden")}i.addEventListener("click",function(){var e=r(regeneratorRuntime.mark((function e(t){var n,r,o,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),c=t.target.closest(".ticket-item").dataset.id,!t.target.classList.contains("delete")){e.next=6;break}b(l),e.next=36;break;case 6:if(!t.target.classList.contains("edit")){e.next=10;break}b(u),e.next=36;break;case 10:if(!t.target.classList.contains("check")){e.next=18;break}return e.next=13,fetch(m+"/"+c,{method:"PUT"});case 13:(n=e.sent).ok||console.error("Ошибка "+n.status),p(),e.next=36;break;case 18:if(!(r=t.target.closest(".ticket-item").querySelector(".ticket-description"))){e.next=23;break}r.parentNode.removeChild(r),e.next=36;break;case 23:return e.next=25,fetch(m+"/"+c);case 25:if(!(o=e.sent).ok){e.next=35;break}return e.next=29,o.json();case 29:a=e.sent,i=a.description,t.target.closest(".ticket-item").insertAdjacentHTML("beforeend",'<div class="ticket-description">'.concat(i,"</div>")),console.log(a),e.next=36;break;case 35:console.error("Ошибка "+o.status);case 36:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),s.addEventListener("click",(function(){b(d)})),f.forEach((function(e){e.addEventListener("click",(function(){h(e.closest(".modal"))}))})),l.addEventListener("click",function(){var e=r(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.target.classList.contains("ok")){e.next=6;break}return e.next=3,fetch(m+"/"+c,{method:"DELETE"});case 3:(n=e.sent).ok?p():console.error("Ошибка "+n.status),h(l);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.addEventListener("submit",function(){var e=r(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=new FormData(a),e.next=4,fetch(m+"/"+c,{method:"PATCH",body:n});case 4:(r=e.sent).ok||console.error("Ошибка "+r.status),p(),h(d);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),o.addEventListener("submit",function(){var e=r(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=new FormData(o),e.next=4,fetch(m,{method:"POST",body:n});case 4:e.sent,o.reset(),p(),h(d);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),p()}]);